<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.capgemini.jtp.mapper.DepartMapper">

    <insert id="addDepart" parameterType="com.capgemini.jtp.entity.Depart">
        INSERT INTO user(`departId`,`departName`,`principalUser`,`connectTelNo`,`connectMobileTelNo`,`faxes`,`branchId`)
        Values (
        #{depart.departName,jdbcType=VARCHAR},
        #{depart.principalUser,jdbcType=VARCHAR},
        #{depart.connectTelNo,jdbcType=BIGINT},
        #{depart.connectMobileTelNo,jdbcType=BIGINT},
        #{depart.faxes,jdbcType=BIGINT},
        #{depart.branchId,jdbcType=BIGINT})
    </insert>

    <update id="updateDepart" parameterType="com.capgemini.jtp.entity.Depart">
        update depart
        <set>
            <if test="depart.departName != null">
                departName = #{depart.departName,jdbcType=VARCHAR},
            </if>
            <if test="depart.principalUser != null">
                principalUser = #{depart.principalUser,jdbcType=VARCHAR},
            </if>
            <if test="depart.connectTelNo != null">
                connectTelNo = #{depart.connectTelNo,jdbcType=BIGINT},
            </if>
            <if test="depart.connectMobileTelNo != null">
                connectMobileTelNo = #{depart.connectMobileTelNo,jdbcType=BIGINT},
            </if>
            <if test="depart.faxes != null">
                faxes = #{depart.faxes,jdbcType=BIGINT},
            </if>
            <if test="depart.branchId != null">
                branchId = #{depart.branchId,jdbcType=BIGINT},
            </if>
        </set>
        where departId = #{depart.departId,jdbcType=BIGINT}
    </update>

    <select id="listDepartVo" resultType="com.capgemini.jtp.entity.Depart">
        select  departName,branchName,principalUser,connectTelNo,connectMobileTelNo,faxes
        from depart d,branch b
        where d.branchId=b.branchId
    </select>

    <delete id="deleteDepartByDepartId" parameterType="com.capgemini.jtp.entity.Depart">
        DELETE FROM depart where departId=#{departId}
    </delete>
</mapper>